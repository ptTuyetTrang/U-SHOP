const data=[
  {
      "id": 1,
      "title":"Bộ đôi Giặt xả Comfort thiên nhiên thanh khiết",
      "price":"508.000",
      "image":"https://u-shop.vn/images/thumbs/0014593_nuoc-xa-vai-comfort-thien-nhien-thanh-khiet-hoa-anh-dao-dao-tuoi-3l_510.png",
      "weight":"3L",
      "quantity":200 
  },
  {
      "id": 2,
      "title":"Nước xả vải Comfort Thiên nhiên Thanh khiết hương Hoa Linh Lan & Kiwi 3l",
      "price":"238.000",
      "image":"https://u-shop.vn/images/thumbs/0014592_nuoc-xa-vai-comfort-thien-nhien-thanh-khiet-huong-hoa-linh-lan-kiwi-3l_500.png",
      "weight":"3L",
      "quantity":100
  },
  {
    "id": 3,
    "title":"Nước giặt Comfort Thiên nhiên Thanh khiết 3kg",
    "price":"270.000",
    "image":"https://u-shop.vn/images/thumbs/0015145_nuoc-giat-comfort-thien-nhien-thanh-khiet-3kg_500.png",
    "weight":"3kg",
    "quantity":256,
  },
  {
    "id": 4,
    "title":"Giấy thơm Comfort hương Mẫu đơn Và Hoa hồng Ohara 40 tờ",
    "price":"81.000",
    "image":"https://u-shop.vn/images/thumbs/0014132_giay-thom-comfort-huong-mau-don-va-hoa-hong-ohara-40-to_500.png",
    "weight":"40 tờ",
    "quantity":277,
  },
  {
    "id": 5,
    "title":"Hiển thị chi tiết cho Nước xả vải Comfort Dịu nhẹ Thơm Dịu Êm 1.8l",
    "price":"149.000",
    "image":"https://u-shop.vn/images/thumbs/0014232_nuoc-xa-vai-comfort-diu-nhe-thom-diu-em-18l_500.png",
    "weight":"1.8l",
    "quantity":0,
  },
  {
    "id": 6,
    "title":"Hiển thị chi tiết cho Nước xả vải Comfort Dịu nhẹ Thơm Dịu Êm 1.8l",
    "price":"250.000",
    "image":"https://u-shop.vn/images/thumbs/0014233_nuoc-xa-vai-comfort-diu-nhe-thom-diu-em-32l_500.png",
    "weight":"1.8l",
    "quantity":10,
  },
  {
    "id": 7,
    "title":"Hiển thị chi tiết cho Nước xả vải Comfort Dịu nhẹ Thơm Dịu Êm 3.2l",
    "price":"285.000",
    "image":"https://u-shop.vn/images/thumbs/0014241_nuoc-xa-vai-comfort-diu-nhe-thom-diu-em-38l_500.png",
    "weight":"3.2l",
    "quantity":21,
  },
  {
    "id": 8,
    "title":"Nước xả vải Comfort Mềm vải dịu nhẹ thơm hương Phấn 3.2l",
    "price":"250.000",
    "image":"https://u-shop.vn/images/thumbs/0014095_nuoc-xa-vai-comfort-mem-vai-diu-nhe-thom-huong-phan-32l_500.png",
    "weight":"3.2l",
    "quantity":88,
  },
  {
    "id": 9,
    "title":"Nước xả vải Comfort Đậm đặc Một lần xả Hương Ban Mai túi 3.8l",
    "price":"271.000",
    "image":"https://u-shop.vn/images/thumbs/0013481_nuoc-xa-vai-comfort-dam-dac-mot-lan-xa-huong-ban-mai-tui-38l_500.png",
    "weight":"3.8l",
    "quantity":208,
  },
  {
    "id": 10,
    "title":" Nước xả vải Comfort Chống Nhăn Hương Sức Sống túi 1.5l",
    "price":"137.000",
    "image":"https://u-shop.vn/images/thumbs/0013492_nuoc-xa-vai-comfort-chong-nhan-huong-suc-song-tui-15l_500.png",
    "weight":"1.5l",
    "quantity":298,
  },
  {
    "id": 11,
    "title":"Nước giặt Comfort dưỡng vải hương Thanh Lịch túi 2.2kg",
    "price":"184.000",
    "image":"https://u-shop.vn/images/thumbs/0013490_nuoc-giat-comfort-duong-vai-huong-thanh-lich-tui-22kg_500.png",
    "weight":"2.2kg",
    "quantity":197,
  },
  {
    "id": 12,
    "title":"Nước giặt Comfort dưỡng vải hương Thanh Lịch túi 2.2kg",
    "price":"126.000",
    "image":"https://u-shop.vn/images/thumbs/0013485_nuoc-giat-comfort-duong-vai-huong-thoi-thuong-tui-22kg_500.png",
    "weight":"2.2kg",
    "quantity":197,
  },
  {
    "id": 13,
    "title":"Nước xả làm mềm vải Comfort chăm sóc chuyên sâu phơi trong nhà Hương nắng mới túi 3.2l",
    "price":"238.000",
    "image":"https://u-shop.vn/images/thumbs/0013491_nuoc-xa-lam-mem-vai-comfort-cham-soc-chuyen-sau-phoi-trong-nha-huong-nang-moi-tui-32l_500.png",
    "weight":"3.2l",
    "quantity":128,
  },
  {
    "id": 14,
    "title":"Nước xả làm mềm vải Comfort chăm sóc chuyên sâu phơi trong nhà Hương nắng mới túi 3.8l",
    "price":"271.000",
    "image":"https://u-shop.vn/images/thumbs/0013958_nuoc-xa-lam-mem-vai-comfort-cham-soc-chuyen-sau-phoi-trong-nha-huong-nang-moi-tui-38l_500.png",
    "weight":"3.8l",
    "quantity":197,
  },
  {
    "id": 15,
    "title":"Nước xả làm mềm vải Comfort chăm sóc chuyên sâu phơi trong nhà Hương nắng mới túi 1.8",
    "price":"142.000",
    "image":"https://u-shop.vn/images/thumbs/0013506_nuoc-xa-vai-comfort-phoi-trong-nha-huong-nang-moi-18l_500.png",
    "weight":"1.8l",
    "quantity":127,
  },
  {
    "id": 16,
    "title":"Hiển thị chi tiết cho Nước xả Comfort hương Nước hoa Jennie 3.8l",
    "price":"271.000",
    "image":"https://u-shop.vn/images/thumbs/0013487_nuoc-xa-comfort-huong-nuoc-hoa-jennie-38l_500.png",
    "weight":"3.8l",
    "quantity":157,
  },
  {
    "id": 17,
    "title":"Nước xả Comfort Hương nước hoa Sophia 3.8l",
    "price":"271.000",
    "image":"https://u-shop.vn/images/thumbs/0013501_nuoc-xa-vai-comfort-huong-nuoc-hoa-thien-nhien-bella-tui-38l_500.png",
    "weight":"3.8l",
    "quantity":157,
  },
  {
    "id": 18,
    "title":"Nước xả vải Comfort Lưu hương sâu hương Vườn xuân 1.8l",
    "price":"142.000",
    "image":"https://u-shop.vn/images/thumbs/0013502_nuoc-xa-vai-comfort-luu-huong-sau-huong-vuon-xuan-18l_500.png",
    "weight":"1.8l",
    "quantity":167,
  },
  {
    "id": 19,
    "title":"Nước xả vải Comfort Lưu hương sâu hương Vườn xuân 3.2l",
    "price":"238.000",
    "image":"https://u-shop.vn/images/thumbs/0013504_nuoc-xa-vai-comfort-luu-huong-sau-huong-vuon-xuan-32l_500.png",
    "weight":"3.2l",
    "quantity":157,
  },
  {
    "id": 20,
    "title":"Nước xả vải Comfort Lưu hương sâu hương Vườn xuân 3.8l",
    "price":"271.000",
    "image":"https://u-shop.vn/images/thumbs/0013505_nuoc-xa-vai-comfort-luu-huong-sau-huong-vuon-xuan-38l_500.png",
    "weight":"3.8l",
    "quantity":157,
  }
]



const Cartlist=[];
function Addcart(api){
  const items=document.querySelectorAll('.js-cart');
  items.forEach((item,index)=>{
    item.addEventListener('click',()=>{
       const  itemApi=
        {
          id:api[index].id,
          title:api[index].title,
          price:api[index].price,
          image:api[index].image,
          weight:api[index].weight,
          quantity:1
        }
        const existingItemIndex = Cartlist.findIndex(cartItem => cartItem.id === itemApi.id);
        if(existingItemIndex >-1){
          Cartlist[existingItemIndex].quantity +=1;
        }else{
          Cartlist.push(itemApi);
        }
        UpdateCartlist(Cartlist)
    });
  });
}
function UpdateCartlist(Cartlist){ 
  const cart=document.querySelector('.js-add-cart');
  cart.innerHTML = '';
  Cartlist.forEach(MiniData=>{
    const div =document.createElement('div');
    div.classList.add('items');
    div.innerHTML=`
        <div class="item">
        <div class="pciture__item ">
          <a href="" class=" block  ">
            <img src="${MiniData.image}" alt="" class=" " >
          </a>
        </div>
        <div class="product flex ">
          <div class=" left ">
            <div class="text-sm  text-[#444444] font-semibold">
              <a href="">${MiniData.title}</a>
            </div>
          </div>
          <div class="right">
            <div class="price">
              <span class="text-[#1c3879] text-sm font-bold">${MiniData.price}</span>
            </div>
            <div class="quanlity font-semibold">
              SL:
              <span class="text-sm font-bold">${MiniData.quantity}</span>
            </div>
          </div>
          <div class="remove-item text-sm">
            <i class=" fa-solid fa-xmark"></i>
          </div>
        </div>
  </div>
    `;
    cart.insertBefore(div, cart.firstChild);
    // if(Cartlist.length > 0){
    //   InfoCart();
    // }
  });
}

function hanlerProduct(api){
  const items=document.querySelectorAll('.js-item-box');
  const product=document.querySelector('.js-product')
  const div =document.createElement('div');

  items.forEach((item,index)=>{
    item.addEventListener('click',()=>{
      const  itemApi=
      {
        id:api[index].id,
        title:api[index].title,
        price:api[index].price,
        image:api[index].image,
        weight:api[index].weight,
      }
      div.innerHTML=`
             <div class="p-4 gird__column-6  ">
                <div class="flex items-center justify-center zoom">
                    <div class="">
                        <div class="relative text-center">
                          <a href="#" class="picture-link w-full h-auto " >
                            <img src="https://u-shop.vn/images/thumbs/0013505_nuoc-xa-vai-comfort-luu-huong-sau-huong-vuon-xuan-38l_500.png" alt="" class="w-full object-scale-down">
                            <div class="">
                              <img src="./imgs/0015330_hero 5.5 v2.png" alt="" class="picture-link-img">
                            </div>
                          </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="gird__column-6 p-4 gap flex flex-col  notice">
                <h1 class=" text-lg text-[#1c3879] font-semibold">
                    Nước xả vải Comfort Thiên nhiên Thanh khiết Hoa Anh Đào & Đào tươi 3l
                </h1>
                <div class="flex gap-3 text-sm font-medium">
                    <div class="">
                        <i class="fa-regular fa-star"></i>
                        <i class="fa-regular fa-star"></i>
                        <i class="fa-regular fa-star"></i>
                        <i class="fa-regular fa-star"></i>
                        <i class="fa-regular fa-star"></i>
                    </div>
                    <span class="">0 đánh giá</span>
                    <span class="">Số lượng đã bán: 51</span>
                </div>
                <div class="">
                    <span class="text-[#c0202e] font-semibold text-lg">
                        238.000
                    </span>
                    <div class="text-xs">
                        hoặc trả trước 
                        <span class="font-extrabold">0 đ</span>
                        <span class="text-[#50bef0]">Fundiin</span>
                        <a href="" class="">Tìm hiểu (?)</a>
                        <p class="">
                            <i>Áp dụng cho đơn hàng dưới 500.000 đ</i>
                        </p>
                    </div>
                </div>
                <div class="flex font-normal text-base">
                    <div class=" ">Thương hiệu</div>
                    <div class="ml-4">
                        <div class="">
                            <a href="" class="text-[#1c3879]">Comfort</a>
                        </div>
                    </div>
                </div>
                <div class="line-clamp-5 text-base">
                    RA MẮT NƯỚC XẢ COMFORT THIÊN NHIÊN THANH KHIẾT MỚI - HƯƠNG HOA ANH ĐÀO & ĐÀO TƯƠI 
                    <br />
                    Nước xả làm mềm vải Comfort Thiên Nhiên Thanh Khiết chính là lựa chọn hoàn hảo cho những ai yêu thích hương thơm nhẹ nhàng, thanh dịu và không nồng gắt trên áo quần. Với tinh dầu nước hoa 100% thiên nhiên được chưng cất tỉ mỉ, Comfort mang đến hương thơm lấy cảm hứng từ Hoa Anh Đào & Đào Tươi mọng nước, tỏa hương tươi mát trong lành, không nồng gắt và bền lâu trên quần áo suốt 100 giờ.
                    
                </div>
                <div class="">
                    <span class="">
                        <strong class="text-[#c0202e]">27</strong>
                        sản phẩm còn lại
                    </span>
                </div>
                <div class="flex gap-2">
                    <div class="add-to-cart-qty-wrapper">
                        <div class="minus">
                            <i class="fa-solid fa-minus"></i>
                        </div>
                        <input type="text" value=" 1" class="qty-input">
                        <div class="plus">
                            <i class="fa-solid fa-plus"></i>
                        </div>
                    </div>
                    <input type="button" value="Mua ngay" class="btn add-to-cart-button ">
                    <div class="flex gap-2">
                        <button class="button-2">
                            <i class="fa-solid fa-cart-shopping"></i>
                        </button>
                        <button class="button-2">
                            <i class="fa-regular fa-heart"></i>
                        </button>
                    </div>
                </div>
            </div> 
      ` 
      product.appendChild(div)
    })
  });
}


function courseAPI(api){
    const productlist=document.getElementById('product-list');
    api.forEach(product=>{
        const div=document.createElement('div');
        div.classList.add('gird__column-9-3', 'mt-2', 'js-item-box',);
        div.innerHTML=`
        <div class="p-2 product-item">
          <div class="relative">
            <a href="./product_detaills_page.html" class="picture-link w-full h-auto " title="${product.title}">
                <img src="${product.image}" alt="" class="w-full object-scale-down">
                <div class="">
                  <img src="./imgs/0015330_hero 5.5 v2.png" alt="" class="picture-link-img">
                </div>
              </a>
                <div class="btn-wrapper">
                  <button class="button-2">
                    <i class="fa-regular fa-heart"></i>
                  </button>
                </div>
              <div class="gross-weight  text-center ">${product.weight}</div>
            </div>
            <div class="details p-3">
              <div class="product-title line-clamp-2">
                <a href="" class="">${product.title}</a>
              </div>
              <div class="add-info">
                <div class="price text-[#c0202e] font-semibold text-lg mb-7">
                  <div class="new-price">${product.price}đ</div>
                    <div class="old-price text-[#908c8c] line-through hidden ">238.000 đ</div>
                </div>
                <div class="">
                  <div class="flex gap-1">
                    <div class="">
                      <input type="button " class=" btn w-32 text-center" value="Mua Ngay">
                    </div>
                    <div class="cart-icon">
                      <button class="w-9 h-9 js-cart">
                        <i class=" fa-solid fa-cart-shopping"></i>
                      </button>
                    </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;
        productlist.appendChild(div);

    })
     Addcart(api)
}
courseAPI(data)
hanlerProduct(data)